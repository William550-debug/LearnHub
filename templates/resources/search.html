<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

{% extends "base.html" %}
{% block title %}Search Results - LearnHub{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <!-- Search Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-4">Search Results</h1>

        <!-- Search Box -->
        <div class="relative max-w-2xl">
            <form action="/search/" method="get" class="relative">
                <input
                    type="text"
                    name="q"
                    value="{{ query }}"
                    placeholder="Search resources, topics, users..."
                    class="w-full px-6 py-4 pl-12 pr-4 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-lg"
                >
                <button type="submit" class="absolute left-4 top-4 text-gray-400">
                    <i class="fas fa-search text-xl"></i>
                </button>
            </form>
        </div>

        <!-- Results Info -->
        <div class="mt-6 flex flex-wrap items-center justify-between">
            <div class="text-gray-600">
                Found <span class="font-bold text-indigo-600">{{ results_count }}</span> results for "<span class="font-medium">{{ query }}</span>"
            </div>

            <!-- Sort Options -->
            <div class="mt-4 md:mt-0">
                <select class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <option>Relevance</option>
                    <option>Most Recent</option>
                    <option>Most Upvoted</option>
                    <option>Most Viewed</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Search Filters -->
    <div class="mb-8">
        <div class="flex flex-wrap gap-2">
            <span class="text-gray-700 font-medium mr-2">Filters:</span>
            <button class="px-4 py-2 bg-indigo-100 text-indigo-800 rounded-lg text-sm font-medium flex items-center">
                Web Development
                <i class="fas fa-times ml-2"></i>
            </button>
            <button class="px-4 py-2 bg-indigo-100 text-indigo-800 rounded-lg text-sm font-medium flex items-center">
                Beginner
                <i class="fas fa-times ml-2"></i>
            </button>
            <button class="px-4 py-2 bg-gray-100 text-gray-800 rounded-lg text-sm font-medium hover:bg-gray-200">
                Clear All
            </button>
        </div>
    </div>

    <!-- Results Section -->
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Filters Sidebar -->
        <div class="lg:col-span-1">
            <div class="bg-white rounded-xl shadow-lg p-6 sticky top-24">
                <h3 class="font-bold text-gray-700 mb-4">Refine Results</h3>

                <!-- Content Type -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-600 mb-3">Content Type</h4>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded text-indigo-600 mr-2" checked>
                            <span class="text-gray-700">All Types</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded text-indigo-600 mr-2">
                            <span class="text-gray-700">Articles</span>
                            <span class="ml-auto text-gray-500 text-sm">(42)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded text-indigo-600 mr-2">
                            <span class="text-gray-700">Videos</span>
                            <span class="ml-auto text-gray-500 text-sm">(28)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded text-indigo-600 mr-2">
                            <span class="text-gray-700">Courses</span>
                            <span class="ml-auto text-gray-500 text-sm">(15)</span>
                        </label>
                    </div>
                </div>

                <!-- Time Range -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-600 mb-3">Time Posted</h4>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="radio" name="time" class="mr-2 text-indigo-600" checked>
                            <span class="text-gray-700">Any Time</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="time" class="mr-2 text-indigo-600">
                            <span class="text-gray-700">Past Month</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="time" class="mr-2 text-indigo-600">
                            <span class="text-gray-700">Past Year</span>
                        </label>
                    </div>
                </div>

                <!-- Difficulty -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-600 mb-3">Difficulty</h4>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded text-indigo-600 mr-2" checked>
                            <span class="text-gray-700">All Levels</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded text-indigo-600 mr-2">
                            <span class="text-gray-700">Beginner</span>
                            <span class="ml-auto text-gray-500 text-sm">(58)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded text-indigo-600 mr-2">
                            <span class="text-gray-700">Intermediate</span>
                            <span class="ml-auto text-gray-500 text-sm">(42)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded text-indigo-600 mr-2">
                            <span class="text-gray-700">Advanced</span>
                            <span class="ml-auto text-gray-500 text-sm">(23)</span>
                        </label>
                    </div>
                </div>

                <button class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 font-medium">
                    Apply Filters
                </button>
            </div>
        </div>

        <!-- Results List -->
        <div class="lg:col-span-3">
            {% if resource_results or user_results %}
            <div class="space-y-6">

            {% for resource in resource_results %}
                <!-- Result 1 -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                    <div class="flex flex-col md:flex-row md:items-start">

                        <div class="md:w-2/3 md:pr-6">
                            <div class="flex items-center mb-3">
                                <span class="text-2xl mr-3">ðŸ“š</span>
                                <div class="flex flex-wrap gap-2">
                                    <span class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium">
                                        {{ resource.category.name }}
                                    </span>
                                    <span class="
                                    px-3 py-1 {% if resource.difficulty == 'B' %}
                                    bg-green-100 text-green-800 {% elif resource.difficulty == 'I' %}
                                    bg-yellow-100 text-yellow-800 {% else  %} bg-red-100 text-red-800
                                    {% endif %}
                                    rounded-full text-sm font-medium">
                                      {% if resource.difficulty == 'B' %}ðŸŸ¢ Beginner{% elif resource.difficulty == 'I' %}ðŸŸ¡ Intermediate{% else %}ðŸ”´ Advanced{% endif %}
                                    </span>
                                </div>
                            </div>

                            <h3 class="text-xl font-bold mb-3">
                                <a href="{% url 'resource_detail' resource_slug=resource.slug %}" class="hover:text-indigo-600">
                                    {{ resource.title }}
                                </a>
                            </h3>

                            <p class="text-gray-600 mb-4">
                                {{ resource.description }}
                            </p>

                            <div class="flex flex-wrap items-center text-gray-500 text-sm">
                                <a href="{% url 'user_profile' user_identifier=resource.author.email %}" class="mr-4">
                                    <i class="far fa-user mr-1"></i> {{ resource.author.get_full_name|default:resource.author.email }}

                                </a>
                                <span class="mr-4">
                                    <i class="far fa-calendar mr-1"></i>{{ resource.created_at|date: "M d, Y" }}
                                </span>
                                <span class="mr-4">
                                    <i class="far fa-clock mr-1"></i> (Read time placeholder)
                                </span>
                            </div>
                        </div>

                        <div class="mt-4 md:mt-0 md:w-1/3">
                            <div class="flex items-center justify-between md:justify-end md:space-x-4">
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-indigo-600">{{ resource.upvote_count|default:0 }}</div>
                                    <div class="text-sm text-gray-600">Upvotes</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-gray-700">{{ resource.views|default:0 }}</div>
                                    <div class="text-sm text-gray-600">Views</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-green-600">{{ resource.comments.count }}</div>
                                    <div class="text-sm text-gray-600">Comments</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}

                <!-- Result 2 -->



                <!-- Result 3 -->


                <!-- Result 4 (User Result) -->
              {% for user in user_results %}
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                    <div class="flex items-center">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-r from-indigo-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold mr-6">
                            {{ user.first_name|default:user.email|slice:":2"|upper }}
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-bold mb-2">
                                <a href="{% url 'user_profile' user_identifier=user.email %}" class="hover:text-indigo-600">
                                    {{ user.get_full_name|default:user.email }}
                                </a>
                            </h3>
                            <p class="text-gray-600 mb-3">
                                {{ user.profile.bio|default:"No bio available. Joined LearnHub to share and discover great learning resources." }}
                            </p>
                            <div class="flex items-center text-gray-500 text-sm">
                                <span class="mr-4">
                                    <i class="fas fa-book mr-1"></i>{{ user.shared_resources.count }} resources shared
                                </span>
                                <span class="mr-4">
                                    <i class="fas fa-bullseye mr-1"></i> {{ user.profile.goals_achieved_count }} goals completed
                                </span>
                                <span class="mr-4">
                                    <i class="fas fa-star mr-1"></i> 420 upvotes received
                                </span>
                            </div>
                        </div>
                        <div>
                            <button class="px-6 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 font-medium">
                                Follow(placeholder)
                            </button>
                        </div>
                    </div>
                </div>
            {% endfor %}
            </div>
                {% else %}


            <!-- Pagination -->
            <div class="mt-12 flex justify-center">
                <nav class="flex items-center space-x-2">
                    <a href="#" class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-300 hover:bg-gray-50">
                        <i class="fas fa-chevron-left"></i>
                    </a>
                    <a href="#" class="w-10 h-10 flex items-center justify-center rounded-lg bg-indigo-600 text-white font-medium">
                        1
                    </a>
                    <a href="#" class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-300 hover:bg-gray-50 font-medium">
                        2
                    </a>
                    <a href="#" class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-300 hover:bg-gray-50 font-medium">
                        3
                    </a>
                    <span class="px-2">...</span>
                    <a href="#" class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-300 hover:bg-gray-50 font-medium">
                        5
                    </a>
                    <a href="#" class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-300 hover:bg-gray-50">
                        <i class="fas fa-chevron-right"></i>
                    </a>
                </nav>
            </div>
            {% else %}
            <!-- No Results State -->
            <div class="text-center py-16">
                <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gray-100 flex items-center justify-center">
                    <i class="fas fa-search text-3xl text-gray-400"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-900 mb-4">No results found</h3>
                <p class="text-gray-600 max-w-md mx-auto mb-8">
                    We couldn't find any resources matching "<span class="font-medium">{{ query }}</span>".
                    Try adjusting your search terms or filters.
                </p>
                <div class="space-y-4">
                    <a href="{% url 'resource_list' %}" class="inline-block bg-indigo-600 text-white px-8 py-3 rounded-lg hover:bg-indigo-700 font-medium">
                        Browse All Resources
                    </a>
                    <div class="text-gray-600">
                        <p class="mb-2">Suggestions:</p>
                        <ul class="list-disc list-inside text-left max-w-sm mx-auto">
                            <li>Try different keywords</li>
                            <li>Check your spelling</li>
                            <li>Use more general terms</li>
                            <li>Browse by category instead</li>
                        </ul>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Search Tips -->
            <div class="mt-12 bg-blue-50 border border-blue-200 rounded-xl p-6">
                <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                    <i class="fas fa-lightbulb text-blue-600 mr-2"></i> Search Tips
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">Use specific terms</h4>
                        <p class="text-sm text-gray-600">
                            Instead of "web dev", try "React hooks tutorial" or "CSS grid layout"
                        </p>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">Filter by type</h4>
                        <p class="text-sm text-gray-600">
                            Use the filters to narrow down to articles, videos, courses, or specific difficulty levels
                        </p>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">Search users</h4>
                        <p class="text-sm text-gray-600">
                            Find experts in specific topics by searching for user profiles
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Filter functionality
    document.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(input => {
        input.addEventListener('change', updateSearchResults);
    });

    function updateSearchResults() {
        // Show loading state
        const resultsContainer = document.querySelector('.space-y-6');
        const originalContent = resultsContainer.innerHTML;

        resultsContainer.innerHTML = `
            <div class="text-center py-12">
                <i class="fas fa-spinner fa-spin text-3xl text-indigo-600 mb-4"></i>
                <p class="text-gray-600">Updating search results...</p>
            </div>
        `;

        // Simulate API call
        setTimeout(() => {
            resultsContainer.innerHTML = originalContent;
        }, 800);
    }

    // Clear filter buttons
    document.querySelectorAll('.bg-indigo-100 .fa-times').forEach(button => {
        button.addEventListener('click', function(e) {
            e.stopPropagation();
            this.closest('button').remove();
        });
    });

    // Clear all filters
    document.querySelector('.bg-gray-100.text-gray-800').addEventListener('click', function() {
        document.querySelectorAll('.bg-indigo-100.text-indigo-800').forEach(btn => btn.remove());
        document.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(input => {
            input.checked = false;
        });
        document.querySelector('select').selectedIndex = 0;
    });
</script>
{% endblock %}

</body>
</html>